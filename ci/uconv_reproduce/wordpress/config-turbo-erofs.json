{"created":"2023-12-06T20:31:30Z","architecture":"amd64","os":"linux","config":{"ExposedPorts":{"80/tcp":{}},"Env":["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c","PHP_INI_DIR=/usr/local/etc/php","APACHE_CONFDIR=/etc/apache2","APACHE_ENVVARS=/etc/apache2/envvars","PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_LDFLAGS=-Wl,-O1 -pie","GPG_KEYS=39B641343D8C104B2B146DC3F9C39DC0B9698544 E60913E4DF209907D8E30D96659A97C9CF2A795A 1198C0117593497A5EC5C199286AF1F9897469DC","PHP_VERSION=8.2.13","PHP_URL=https://www.php.net/distributions/php-8.2.13.tar.xz","PHP_ASC_URL=https://www.php.net/distributions/php-8.2.13.tar.xz.asc","PHP_SHA256=2629bba10117bf78912068a230c68a8fd09b7740267bd8ebd3cfce91515d454b"],"Entrypoint":["docker-entrypoint.sh"],"Cmd":["apache2-foreground"],"Volumes":{"/var/www/html":{}},"WorkingDir":"/var/www/html","StopSignal":"SIGWINCH","ArgsEscaped":true},"rootfs":{"type":"layers","diff_ids":["sha256:abb8474cd5ee7c0199099cb2f09b7b5039cae70c74042f6809059bbaca34d94a","sha256:70df7065c9dee3cd8711452e1e86dc69d41a3a83d9f4ea95042921b054123c57","sha256:374299137f35668107aa96b7941d176575feac8dd547c9c4281bed44d6909408","sha256:b44048a19e734dd121bf31db94009f9a8eae942a466fe962149f44028d9770ce","sha256:2e43229fdb623c57a02229cf5bd8696585c09ef3b274c6b10ddc902fa81e7e61","sha256:ae163160a6f7da124c4fac43b3f1c850d538bd51a66458b735074f391f302a8b","sha256:18c738f34cd17e5400f434d7743ef53fdef4313fc5ef827b221d916fad18b259","sha256:1c5d96232a33dd33f0b8c2135038de364ba7f5da399ce63cf6d54635f712d630","sha256:2b22cf28e0cf7a2a7de6d1e47160c48e98e81601beb63ac18e085e6b3dac3387","sha256:71309229adad75f937d506057917ea911d89233cd172ffac2dc095ebf81211ad","sha256:ba03a3d963c4d22eaa7847a91e1011ffb3ee7f89dbcd60d502407a1ac5799ebd","sha256:131ef3fd7a86eda45204ee1deafe5638cd4e9a674c76bceb8a2b033d4c4c42d5","sha256:ee68ba1e34df8e7b926367bca3d83fd5e197626eac91d5aa78af7f53a35e2b3b","sha256:697b5d02e69ddd8335ea0aad07da8b552bb94e59f5917fddb906bcdb7b41a516","sha256:eafb5227ecf9d3a46bdb9bfbe8b8e69cff15b619790015b30601bc67fec0d5a7","sha256:86113c85556d6e2b6090f82c9ef8a0ecbbb694267e2c5c710631a7eebfc09f1e","sha256:add27ad021ec5e07c03e2dba6bf1a60467f587767d98164b3eff8951308a725e","sha256:69e9b130412f092e71b7dead12756aa2054214ea44fd3864add89da6ad642b31","sha256:782f645b19db473fe247e44c1e6a587f3d3dce0438fbaef431332780646cac6b","sha256:abce0e3caa425be28ba369ef855c457de9a05afb3081741f72c78fd8213cba99","sha256:e4c1a32a7f367045d4dc4168c60680045619cb21d0e99107d49fe00db266abdf"]},"history":[{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop) ADD file:ac3cd70031d35e46d86b876934946ffc8756de4de065fbc926dce642dac07ff3 in / "},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  CMD [\"bash\"]","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \t{ \t\techo 'Package: php*'; \t\techo 'Pin: release *'; \t\techo 'Pin-Priority: -1'; \t} \u003e /etc/apt/preferences.d/no-debian-php"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\t$PHPIZE_DEPS \t\tca-certificates \t\tcurl \t\txz-utils \t; \trm -rf /var/lib/apt/lists/*"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_INI_DIR=/usr/local/etc/php","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \tmkdir -p \"$PHP_INI_DIR/conf.d\"; \t[ ! -d /var/www/html ]; \tmkdir -p /var/www/html; \tchown www-data:www-data /var/www/html; \tchmod 1777 /var/www/html"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV APACHE_CONFDIR=/etc/apache2","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV APACHE_ENVVARS=/etc/apache2/envvars","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends apache2; \trm -rf /var/lib/apt/lists/*; \t\tsed -ri 's/^export ([^=]+)=(.*)$/: ${\\1:=\\2}\\nexport \\1/' \"$APACHE_ENVVARS\"; \t\t. \"$APACHE_ENVVARS\"; \tfor dir in \t\t\"$APACHE_LOCK_DIR\" \t\t\"$APACHE_RUN_DIR\" \t\t\"$APACHE_LOG_DIR\" \t\t\"$APACHE_RUN_DIR/socks\" \t; do \t\trm -rvf \"$dir\"; \t\tmkdir -p \"$dir\"; \t\tchown \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$dir\"; \t\tchmod 1777 \"$dir\"; \tdone; \t\trm -rvf /var/www/html/*; \t\tln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"; \tchown -R --no-dereference \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$APACHE_LOG_DIR\""},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c a2dismod mpm_event \u0026\u0026 a2enmod mpm_prefork"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c { \t\techo '\u003cFilesMatch \\.php$\u003e'; \t\techo '\\tSetHandler application/x-httpd-php'; \t\techo '\u003c/FilesMatch\u003e'; \t\techo; \t\techo 'DirectoryIndex disabled'; \t\techo 'DirectoryIndex index.php index.html'; \t\techo; \t\techo '\u003cDirectory /var/www/\u003e'; \t\techo '\\tOptions -Indexes'; \t\techo '\\tAllowOverride All'; \t\techo '\u003c/Directory\u003e'; \t} | tee \"$APACHE_CONFDIR/conf-available/docker-php.conf\" \t\u0026\u0026 a2enconf docker-php"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_LDFLAGS=-Wl,-O1 -pie","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV GPG_KEYS=39B641343D8C104B2B146DC3F9C39DC0B9698544 E60913E4DF209907D8E30D96659A97C9CF2A795A 1198C0117593497A5EC5C199286AF1F9897469DC","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_VERSION=8.2.13","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_URL=https://www.php.net/distributions/php-8.2.13.tar.xz PHP_ASC_URL=https://www.php.net/distributions/php-8.2.13.tar.xz.asc","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENV PHP_SHA256=2629bba10117bf78912068a230c68a8fd09b7740267bd8ebd3cfce91515d454b","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends gnupg; \trm -rf /var/lib/apt/lists/*; \t\tmkdir -p /usr/src; \tcd /usr/src; \t\tcurl -fsSL -o php.tar.xz \"$PHP_URL\"; \t\tif [ -n \"$PHP_SHA256\" ]; then \t\techo \"$PHP_SHA256 *php.tar.xz\" | sha256sum -c -; \tfi; \t\tif [ -n \"$PHP_ASC_URL\" ]; then \t\tcurl -fsSL -o php.tar.xz.asc \"$PHP_ASC_URL\"; \t\texport GNUPGHOME=\"$(mktemp -d)\"; \t\tfor key in $GPG_KEYS; do \t\t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \t\tdone; \t\tgpg --batch --verify php.tar.xz.asc php.tar.xz; \t\tgpgconf --kill all; \t\trm -rf \"$GNUPGHOME\"; \tfi; \t\tapt-mark auto '.*' \u003e /dev/null; \tapt-mark manual $savedAptMark \u003e /dev/null; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop) COPY file:ce57c04b70896f77cc11eb2766417d8a1240fcffe5bba92179ec78c458844110 in /usr/local/bin/ "},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tapache2-dev \t\tlibargon2-dev \t\tlibcurl4-openssl-dev \t\tlibonig-dev \t\tlibreadline-dev \t\tlibsodium-dev \t\tlibsqlite3-dev \t\tlibssl-dev \t\tlibxml2-dev \t\tzlib1g-dev \t; \t\texport \t\tCFLAGS=\"$PHP_CFLAGS\" \t\tCPPFLAGS=\"$PHP_CPPFLAGS\" \t\tLDFLAGS=\"$PHP_LDFLAGS\" \t\tPHP_BUILD_PROVIDER='https://github.com/docker-library/php' \t\tPHP_UNAME='Linux - Docker' \t; \tdocker-php-source extract; \tcd /usr/src/php; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \tif [ ! -d /usr/include/curl ]; then \t\tln -sT \"/usr/include/$debMultiarch/curl\" /usr/local/include/curl; \tfi; \t./configure \t\t--build=\"$gnuArch\" \t\t--with-config-file-path=\"$PHP_INI_DIR\" \t\t--with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" \t\t\t\t--enable-option-checking=fatal \t\t\t\t--with-mhash \t\t\t\t--with-pic \t\t\t\t--enable-ftp \t\t--enable-mbstring \t\t--enable-mysqlnd \t\t--with-password-argon2 \t\t--with-sodium=shared \t\t--with-pdo-sqlite=/usr \t\t--with-sqlite3=/usr \t\t\t\t--with-curl \t\t--with-iconv \t\t--with-openssl \t\t--with-readline \t\t--with-zlib \t\t\t\t--disable-phpdbg \t\t\t\t--with-pear \t\t\t\t$(test \"$gnuArch\" = 's390x-linux-gnu' \u0026\u0026 echo '--without-pcre-jit') \t\t--with-libdir=\"lib/$debMultiarch\" \t\t\t\t--disable-cgi \t\t\t\t--with-apxs2 \t; \tmake -j \"$(nproc)\"; \tfind -type f -name '*.a' -delete; \tmake install; \tfind \t\t/usr/local \t\t-type f \t\t-perm '/0111' \t\t-exec sh -euxc ' \t\t\tstrip --strip-all \"$@\" || : \t\t' -- '{}' + \t; \tmake clean; \t\tcp -v php.ini-* \"$PHP_INI_DIR/\"; \t\tcd /; \tdocker-php-source delete; \t\tapt-mark auto '.*' \u003e /dev/null; \t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \tfind /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=\u003e/ { so = $(NF-1); if (index(so, \"/usr/local/\") == 1) { next }; gsub(\"^/(usr/)?\", \"\", so); print so }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*; \t\tpecl update-channels; \trm -rf /tmp/pear ~/.pearrc; \t\tphp --version"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop) COPY multi:e11221d43af7136e4dbad5a74e659bcfa753214a9e615c3daf357f1633d9d3d1 in /usr/local/bin/ "},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c docker-php-ext-enable sodium"},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  ENTRYPOINT [\"docker-php-entrypoint\"]","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  STOPSIGNAL SIGWINCH","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop) COPY file:e3123fcb6566efa979f945bfac1c94c854a559d7b82723e42118882a8ac4de66 in /usr/local/bin/ "},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop) WORKDIR /var/www/html","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  EXPOSE 80","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"/bin/sh -c #(nop)  CMD [\"apache2-foreground\"]","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tghostscript \t; \trm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \t\tlibfreetype6-dev \t\tlibicu-dev \t\tlibjpeg-dev \t\tlibmagickwand-dev \t\tlibpng-dev \t\tlibwebp-dev \t\tlibzip-dev \t; \t\tdocker-php-ext-configure gd \t\t--with-freetype \t\t--with-jpeg \t\t--with-webp \t; \tdocker-php-ext-install -j \"$(nproc)\" \t\tbcmath \t\texif \t\tgd \t\tintl \t\tmysqli \t\tzip \t; \tpecl install imagick-3.6.0; \tdocker-php-ext-enable imagick; \trm -r /tmp/pear; \t\tout=\"$(php -r 'exit(0);')\"; \t[ -z \"$out\" ]; \terr=\"$(php -r 'exit(0);' 3\u003e\u00261 1\u003e\u00262 2\u003e\u00263)\"; \t[ -z \"$err\" ]; \t\textDir=\"$(php -r 'echo ini_get(\"extension_dir\");')\"; \t[ -d \"$extDir\" ]; \tapt-mark auto '.*' \u003e /dev/null; \tapt-mark manual $savedAptMark; \tldd \"$extDir\"/*.so \t\t| awk '/=\u003e/ { so = $(NF-1); if (index(so, \"/usr/local/\") == 1) { next }; gsub(\"^/(usr/)?\", \"\", so); print so }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*; \t\t! { ldd \"$extDir\"/*.so | grep 'not found'; }; \terr=\"$(php --version 3\u003e\u00261 1\u003e\u00262 2\u003e\u00263)\"; \t[ -z \"$err\" ] # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c set -eux; \tdocker-php-ext-enable opcache; \t{ \t\techo 'opcache.memory_consumption=128'; \t\techo 'opcache.interned_strings_buffer=8'; \t\techo 'opcache.max_accelerated_files=4000'; \t\techo 'opcache.revalidate_freq=2'; \t} \u003e /usr/local/etc/php/conf.d/opcache-recommended.ini # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c { \t\techo 'error_reporting = E_ERROR | E_WARNING | E_PARSE | E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_COMPILE_WARNING | E_RECOVERABLE_ERROR'; \t\techo 'display_errors = Off'; \t\techo 'display_startup_errors = Off'; \t\techo 'log_errors = On'; \t\techo 'error_log = /dev/stderr'; \t\techo 'log_errors_max_len = 1024'; \t\techo 'ignore_repeated_errors = On'; \t\techo 'ignore_repeated_source = Off'; \t\techo 'html_errors = Off'; \t} \u003e /usr/local/etc/php/conf.d/error-logging.ini # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c set -eux; \ta2enmod rewrite expires; \t\ta2enmod remoteip; \t{ \t\techo 'RemoteIPHeader X-Forwarded-For'; \t\techo 'RemoteIPInternalProxy 10.0.0.0/8'; \t\techo 'RemoteIPInternalProxy 172.16.0.0/12'; \t\techo 'RemoteIPInternalProxy 192.168.0.0/16'; \t\techo 'RemoteIPInternalProxy 169.254.0.0/16'; \t\techo 'RemoteIPInternalProxy 127.0.0.0/8'; \t} \u003e /etc/apache2/conf-available/remoteip.conf; \ta2enconf remoteip; \tfind /etc/apache2 -type f -name '*.conf' -exec sed -ri 's/([[:space:]]*LogFormat[[:space:]]+\"[^\"]*)%h([^\"]*\")/\\1%a\\2/g' '{}' + # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"RUN /bin/sh -c set -eux; \tversion='6.4.2'; \tsha1='d1aedbfea77b243b09e0ab05b100b782497406dd'; \t\tcurl -o wordpress.tar.gz -fL \"https://wordpress.org/wordpress-$version.tar.gz\"; \techo \"$sha1 *wordpress.tar.gz\" | sha1sum -c -; \t\ttar -xzf wordpress.tar.gz -C /usr/src/; \trm wordpress.tar.gz; \t\t[ ! -e /usr/src/wordpress/.htaccess ]; \t{ \t\techo '# BEGIN WordPress'; \t\techo ''; \t\techo 'RewriteEngine On'; \t\techo 'RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]'; \t\techo 'RewriteBase /'; \t\techo 'RewriteRule ^index\\.php$ - [L]'; \t\techo 'RewriteCond %{REQUEST_FILENAME} !-f'; \t\techo 'RewriteCond %{REQUEST_FILENAME} !-d'; \t\techo 'RewriteRule . /index.php [L]'; \t\techo ''; \t\techo '# END WordPress'; \t} \u003e /usr/src/wordpress/.htaccess; \t\tchown -R www-data:www-data /usr/src/wordpress; \tmkdir wp-content; \tfor dir in /usr/src/wordpress/wp-content/*/ cache; do \t\tdir=\"$(basename \"${dir%/}\")\"; \t\tmkdir \"wp-content/$dir\"; \tdone; \tchown -R www-data:www-data wp-content; \tchmod -R 1777 wp-content # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"VOLUME [/var/www/html]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"COPY wp-config-docker.php /usr/src/wordpress/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"COPY docker-entrypoint.sh /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-06T20:31:30Z","created_by":"ENTRYPOINT [\"docker-entrypoint.sh\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-06T20:31:30Z","created_by":"CMD [\"apache2-foreground\"]","comment":"buildkit.dockerfile.v0","empty_layer":true}]}